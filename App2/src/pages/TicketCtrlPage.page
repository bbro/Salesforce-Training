<apex:page controller="TicketCtrl" sidebar="false" showHeader="false"
	docType="html-5.0">
	<apex:form>
		<apex:pageMessages />
		<apex:pageBlock title="BUY TICKET" id="theBlock">
			<apex:pageBlockSection title="PERSONAL DATA">
				<apex:pageBlockSectionItem>
					<apex:outputText value="FIRST NAME" />
					<apex:inputText value="{! firstName }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText value="LAST NAME" />
					<apex:inputText value="{! lastName }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText value="PIN" />
					<apex:inputText maxLength="11" value="{! pin }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText value="EMAIL" />
					<apex:inputText value="{! email }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:inputCheckbox value="{! isInvoiceNeed }">
						<apex:actionSupport event="onchange" rerender="theBlock" />
					</apex:inputCheckbox>
					<apex:outputText value="I WOULD LIKE TO REVCEIVE INVOICE" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem rendered="{!(isInvoiceNeed == true)}">
					<apex:outputText value="BUSINESS NAME" />
					<apex:inputText value="{! businessName }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem rendered="{!(isInvoiceNeed == true)}">
					<apex:outputText value="NIP" />
					<apex:inputText value="{! nip }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem rendered="{!(isInvoiceNeed == true)}">
					<apex:outputText value="POSTAL CODE" />
					<apex:inputText value="{! postalCode }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem rendered="{!(isInvoiceNeed == true)}">
					<apex:outputText value="CITY" />
					<apex:inputText value="{! city }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem rendered="{!(isInvoiceNeed == true)}">
					<apex:outputText value="STREET" />
					<apex:inputText value="{! street }" />
				</apex:pageBlockSectionItem>
			</apex:pageBlockSection>
			<apex:pageBlockSection title="BILET" columns="2">

				<apex:pageBlockSection title="BASIC" columns="2">
					<apex:pageBlockSectionItem>
						<apex:outputText value="DISCOUNT " />
						<apex:inputField value="{! ticket.Discount__c }" />
					</apex:pageBlockSectionItem>
					<apex:pageBlockSectionItem>
						<apex:selectList value="{! trainCarriage.Class__c }"
							multiselect="false" size="1">
							<apex:selectOptions value="{! classOptions }" />
						</apex:selectList>

					</apex:pageBlockSectionItem>
				</apex:pageBlockSection>

				<apex:pageBlockSection title="SPOT">
					<apex:pageBlockSectionItem>
						<apex:inputCheckbox value="{! isWindow }" />
						<apex:outputText value="WINDOW" />
					</apex:pageBlockSectionItem>
					<apex:pageBlockSectionItem rendered="{! rerender }">
						<apex:inputCheckbox value="{! isTable }" />
						<apex:outputText value="NEAR TABLE" />
					</apex:pageBlockSectionItem>
				</apex:pageBlockSection>

				<apex:commandLink action="{! addElementToTicket }"
					value="Add Ticket" />
			</apex:pageBlockSection>
			<apex:pageBlockTable value="{! TicketsList }" var="t">
				<apex:column>
					<apex:outputText value="{! t }" />
				</apex:column>
				<apex:column>
					<apex:commandLink action="{! deleteTicket }" value="Delete Ticket"
						style="float:right;">
						<apex:param name="ticketToDelete" value="{! t }"
							assignTo="{! ticketToDelete }" />
					</apex:commandLink>
				</apex:column>
			</apex:pageBlockTable>

			<apex:pageBlockSection title="Free Tickets Available Near:"
				columns="2">
				<apex:pageBlockSectionItem>
					<apex:outputText value="Window: {! nearWindowFreeSpots }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText
						value="Table & Window: {! nearTableAndWindowFreeSpots }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText value="Corridor: {! nearCorridorFreeSpots }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText
						value="Table & Corridor: {! nearCorridorAndTableFreeSpots }" />
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem>
					<apex:outputText value="All: {! allFreeSpots }" />
				</apex:pageBlockSectionItem>
			</apex:pageBlockSection>
			<apex:pageBlockButtons>
				<apex:commandButton action="{! moveToFindRoutePage }" value="CANCEL" />
				<apex:commandButton action="{! getFreeSeatsList }" value="Buy"
					disabled="{! !(ticketsList.size > 0) }" id="buyButton" />
				<apex:commandLink action="{! invoiceShow }" value="Invoice"
					target="_blank" id="invoiceButton"
					rendered="{! showInvoiceBoolean }" />
			</apex:pageBlockButtons>
		</apex:pageBlock>
	</apex:form>
</apex:page>